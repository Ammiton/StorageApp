BASE_DIR=${PWD}/
#PYTHON_VERSION="Python 3.*"

if [ -f "python_version.tmp" ]; then
	rm -rf python_version.tmp
fi
python3 --version > python_version.tmp

echo "Python version Checked"
rm -rf python_version.tmp
	
if [ -f venv.tmp ] ; then
	rm -rf venv.tmp
fi
	
echo "$VIRTUAL_ENV" | sed -e 's/\/.*\///g' > venv.tmp
if [ ! -s venv.tmp ]; then
	echo "FAILED : Virtual env not installed"
	echo "To install virtual env run apt install python3.8-venv"
	echo "FAILED"
	exit 1
fi
	
if [ "storage-env" != "$(cat venv.tmp)" ]; then
	source ${BASE_DIR}/.storage-env/bin/activate
	python3 -m pip install -r requirements.txt
fi
rm -rf venv.tmp

export PYTHONPATH=${PWD}/../:$PYTHONPATH

echo "Storage-env Virtual Environment activated"
echo 
echo "DONE"
